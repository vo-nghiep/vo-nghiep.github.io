function matHang(hinh, ten, gia, loai) {
    this.hinh = hinh;
    this.ten = ten;
    this.gia = gia;
    this.loai = loai;
    this.soLuong = 1;
    this.tongGia = this.gia * this.soLuong;
}
var tongTien = 0;
var gioHang = new Array();
// Th√™m m·∫∑t h√†ng
function them(hinh, ten, gia, loai) {
    var test = true;
    var i;
    // Ki·ªÉm tra th·ª≠ m·∫∑t h√†ng ƒë√£ c√≥ trong gi·ªè h√†ng ch∆∞a
    for (i = 0; i < gioHang.length; i++) {
        if (loai == gioHang[i].loai) test = false;
    }
    // Th√™m m·∫∑t h√†ng
    if (test == true) {
        gioHang.push(new matHang(hinh, ten, gia, loai));
    } else {
        tang(loai);
    }
    hienThi();
}
// X√≥a m·∫∑t h√†ng
function xoa(loai) {
    for (i = 0; i < gioHang.length; i++) {
        if (loai == gioHang[i].loai) {
            gioHang.splice(i, 1);
        }
    }
    hienThi();
    if (gioHang.length == 0) {
        document.getElementById('gio').innerHTML = '<div id="khong"><p class="khong">Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong gi·ªè h√†ng üõí</p></div>';
        document.getElementById('tongTien2').innerHTML = '';
        document.getElementById('tongTien3').innerHTML = '';
        document.getElementById('soTienGiam').innerHTML = '';
        document.getElementById('thanhToan').style.display = "none";
        document.getElementById('tongTien').innerHTML = '';
    }
}
// TƒÉng s·ªë l∆∞·ª£ng m·∫∑t h√†ng
function tang(loai) {
    for (i = 0; i < gioHang.length; i++) {
        if (loai == gioHang[i].loai) {
            gioHang[i].soLuong++;
            gioHang[i].tongGia = (gioHang[i].gia) * gioHang[i].soLuong;
            console.log(gioHang[i].soLuong);
        }
    }
    hienThi();
}
// Gi·∫£m s·ªë l∆∞·ª£ng m·∫∑t h√†ng
function giam(loai) {
    for (i = 0; i < gioHang.length; i++) {
        if (loai == gioHang[i].loai) {
            if (gioHang[i].soLuong > 1) {
                gioHang[i].soLuong--;
                gioHang[i].tongGia = parseInt(gioHang[i].gia) * gioHang[i].soLuong;
                console.log(gioHang[i].soLuong);
            }
        }
    }
    hienThi();
}
// ƒê·ªãnh d·∫°ng ti·ªÅn t·ªá
function currencyFormat(num) {
    return num.toLocaleString('it-IT', { style: 'currency', currency: 'VND' });
}
//T·∫£i l·∫°i trang
function hienThi() {
    document.getElementById('gio').innerHTML = '';
    document.getElementById('tongTien').innerHTML = '';
    document.getElementById('thanhToan').style.display = "block";
    document.getElementById('tongTien').style.display = "block";
    var giaDaFormat;
    // Hi·ªán c√°c m·∫∑t h√†ng trong gi·ªè h√†ng
    for (i = 0; i < gioHang.length; i++) {
        giaDaFormat = currencyFormat(gioHang[i].gia); // ƒê·ªãnh d·∫°ng ti·ªÅn t·ªá
        document.getElementById('gio').innerHTML
            += '<div id="hangHoa"> <div id="hinhAnhSP"> <img src="' + gioHang[i].hinh + '"></div>'
            + '<div id="inf">'
            + '<p class = "nameSP">' + gioHang[i].ten + '</p>'
            + '<p class = "price">' + giaDaFormat + '</p>'
            + '<div class="tangGiam">'
            + '<div id="giam" onclick="giam(\'' + gioHang[i].loai + '\')"><img src="images/icon-minus.png"></div>'
            + '<input type="text" id="soluong" value="' + gioHang[i].soLuong + '">'
            + '<div id="tang" onclick="tang(\'' + gioHang[i].loai + '\')"><img src="images/icon-plus.png"></div>'
            + '</div>'
            + '</div>'
            + '<div id="nutxoa"><img src="images/icon-rubbish.png" class="remove" onclick="xoa(\'' + gioHang[i].loai + '\')"></div>'
            + '</div>';
    }
    // Xu·∫•t t·ªïng ti·ªÅn
    for (i = 0; i < gioHang.length; i++) {
        tongTien += Number(gioHang[i].tongGia);
    }
    tongTien = currencyFormat(tongTien);
    document.getElementById('tongTien').innerHTML = 'T·ªïng ti·ªÅn: ' + tongTien;
    document.getElementById('tongTien2').innerHTML = tongTien;
    document.getElementById('soTienGiam').innerHTML = '- 0 VND';
    document.getElementById('tongTien3').innerHTML = tongTien;
    tongTien = 0;
}
// Ki·ªÉm tra form
function xuLy($scope) {
    $scope.datHang = function () {
        var hoTen = document.getElementById('tenKH').value.trim();
        var SDT = document.getElementById('soDT').value.trim();
        var gioiTinh = document.getElementsByName('GT');
        var nhanHang = document.getElementsByName('NH');
        var gender = "";
        var nhan = "";
        var i, temp = 0, test = 0;
        if (hoTen == "") {
            alert("Vui l√≤ng nh·∫≠p h·ªç v√† t√™n c·ªßa b·∫°n!");
            return;
        }
        if (isNaN(hoTen) == false) {
            alert("H·ªç v√† t√™n ph·∫£i l√† t·∫≠p h·ª£p c√°c ch·ªØ c√°i!");
            document.getElementById('tenKH').value = "";
            return;
        }
        if (hoTen != "" && isNaN(hoTen) == true) {
            test = 1;
        }
        if (SDT == "") {
            alert("Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n!");
            return;
        }
        if (SDT.length < 10 || SDT.length > 10 || isNaN(SDT) == true) {
            alert("S·ªë ƒëi·ªán tho·∫°i ph·∫£i ch·ª©a 10 ch·ªØ s·ªë!");
            document.getElementById('soDT').value = "";
            return;
        }
        if (SDT.length == 10) {
            temp = 1;
        }
        for (i = 0; i < gioiTinh.length; i++) {
            if (gioiTinh[i].checked) {
                gender = gioiTinh[i].value;
                break;
            }
        }
        for (i = 0; i < nhanHang.length; i++) {
            if (nhanHang[i].checked) {
                nhan = nhanHang[i].value;
                break;
            }
        }
        if (test == 1 && temp == 1) {
            var kq = "                                    ƒê·∫∂T H√ÄNG TH√ÄNH C√îNG!"
                + "\n\n                               + H·ªç v√† t√™n:  " + hoTen
                + "\n                               + S·ªë ƒëi·ªán tho·∫°i:  " + SDT
                + "\n                               + Gi·ªõi t√≠nh:  " + gender
                + "\n                               + N∆°i nh·∫≠n h√†ng:  " + nhan
                + "\n_____________________________________________________________________________"
                + "\n\n Ch√∫ng t√¥i s·∫Ω li·ªán h·ªá v·ªõi b·∫°n ƒë·ªÉ x√°c nh·∫≠n ƒë∆°n ƒë·∫∑t h√†ng n√†y!"
            alert(kq);
        }
    }
}
